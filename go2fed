#!/bin/sh

HELP=0
SCRATCH=1
BUILD=2
PARALLEL=3
UPDATE=4
GGI=5
GITHUB2SPEC=6
REVIEW=7
GOOGLECODE2SPEC=8

operation=-1
script_dir=$(dirname $0)

################################
################################
function printHelp {
	echo "Synopsis: go2fed command [arg1 [arg2 ...]]"
	echo ""
	echo "command:"
	echo "	help		 prints this help"
	echo "	scratch-build	 scratch build all fedora branches"
	echo "	build 		 build all fedora branches"
	echo "	update		 update all fedora branches"
	echo "	ggi		 get golang imports"
	echo "	github2spec	 generate spec file from github"
	echo "	googlecode2spec  generate spec file from googlecode"
	echo "	review		 creates review in Bugzilla (rpmbuild of spec file, rpmlint, koji build, ...)"
}


################################
################################
# $1 - command
if [ "$1" == "help" ]; then
	operation=$HELP
elif [ "$1" == "scratch-build" ]; then
	operation=$SCRATCH
elif [ "$1" == "build" ]; then
	operation=$BUILD
elif [ "$1" == "parallel-push" ]; then
	operation=$PARALLEL
elif [ "$1" == "update" ]; then
	operation=$UPDATE
elif [ "$1" == "ggi" ]; then
        operation=$GGI
elif [ "$1" == "github2spec" ]; then
        operation=$GITHUB2SPEC
elif [ "$1" == "googlecode2spec" ]; then
        operation=$GOOGLECODE2SPEC
elif [ "$1" == "review" ]; then
        operation=$REVIEW
fi

################################
################################
if [ $operation -eq -1 ]; then
	echo "Wrong operation"
	printHelp
	exit 0
fi



if [ $operation -eq $HELP ]; then
	printHelp
elif [ $operation -eq $SCRATCH ]; then
	$script_dir/scratchbuildbranches.sh
elif [ $operation -eq $BUILD ]; then
	$script_dir/scratchbuildbranches.sh raw
elif [ $operation -eq $PARALLEL ]; then
	$script_dir/push2allbranches.sh
elif [ $operation -eq $UPDATE ]; then
	$script_dir/updateallbuilds.sh
elif [ $operation -eq $GGI ]; then
	$script_dir/ggi.sh
elif [ $operation -eq $GITHUB2SPEC ]; then
        $script_dir/github2gospec.sh $2 $3 $4
elif [ $operation -eq $GOOGLECODE2SPEC ]; then
        $script_dir/googlecode2gospec.sh $2 $3
elif [ $operation -eq $REVIEW ]; then
        $script_dir/preparePackageReview.sh $2 $3
fi
